---
title: Adobe Commerce セキュリティスキャンツールのトラブルシューティングガイド
description: Adobe CommerceとMagento Open Sourceのセキュリティスキャンツールに関する様々な問題のトラブルシューティング方法について説明します。
exl-id: 35e18a11-bda9-47eb-924a-1095f4f01017
feature: Compliance, Security
role: Developer
source-git-commit: 958179e0f3efe08e65ea8b0c4c4e1015e3c5bb76
workflow-type: tm+mt
source-wordcount: '859'
ht-degree: 0%

---

# Adobe Commerce セキュリティスキャンツールのトラブルシューティングガイド

Adobe CommerceとMagento Open Sourceのセキュリティスキャンツールに関する様々な問題のトラブルシューティング方法について説明します。

## 問題：サイトを送信できない

セキュリティ スキャン ツールでは、ドメインをセキュリティ スキャン ツールに追加する前に、サイトの所有権を証明する必要があります。 これを行うには、HTMLコメントまたは `<meta>` タグを使用して、確認コードをサイトに追加します。 HTMLコメントは `<body>` タグの中、例えばフッターセクションに配置してください。 `<meta>` タグは、ページの `<head>` セクション内に配置する必要があります。

マーチャントが直面する一般的な問題は、セキュリティスキャンツールがマーチャントのサイト所有権を確認できない場合に発生します。

エラーが発生し、サイトをスキャン用に送信できない場合は、サポートナレッジベースのトラブルシューティング記事 [ セキュリティスキャンにサイトを追加する際のエラーメッセージ ](/help/troubleshooting/miscellaneous/error-message-adding-site-into-security-scan.md) を参照してください。

## 問題：セキュリティ スキャン ツールで生成されたレポートが空です

セキュリティ スキャン ツールから空のスキャン レポートを取得するか、*セキュリティ ツールがベース URL に到達できませんでした* または *指定された URL にMagentoのインストールが見つかりません* などのエラーが 1 つだけ含まれたレポートを取得します。

### 解決策

1. 52.87.98.44、34.196.167.176、および 3.218.25.102 IP が 80 および 443 ポートでブロックされていないことを確認します。
1. 送信した URL でリダイレクトが行われていないかどうかを確認します（例えば、`https://www.mystore.com` へのリダイレクト `https://mystore.com` その逆のリダイレクト、他のドメイン名へのリダイレクトなど）。
1. WAF/Web サーバーのアクセスログで、却下されたリクエストまたは実行されなかったリクエストを調査します。 HTTP 403 `Forbidden` と HTTP 500 `Internal server error` は、空のレポート生成を引き起こす一般的なサーバー応答です。 ユーザーエージェントによる要求をブロックする確認コードの例を次に示します。

```code block
if(req.http.user-agent ~ "(Chrome|Firefox)/[1-7][0-9]" && client.ip !~ useragent_allowlist)

{   error 403;   }
```

詳細については、サポート技術情報の [ セキュリティ スキャン ツールのレポートが空白になる ](/help/troubleshooting/miscellaneous/the-security-scan-tool-report-is-blank.md) に関する記事も参照してください。

## 問題：セキュリティの問題は解決されましたが、スキャン時に引き続き脆弱と表示されます

セキュリティ上の問題が解決され、新しく解決された問題に対する脆弱性がなくなったことを示すセキュリティスキャンが表示されることを期待しています。 代わりに、セキュリティスキャンによって生成されたレポートが、セキュリティの問題に対する脆弱性を引き続き報告していることがわかります。

### 原因：

クラウドインスタンスのメタデータは、`active` および `live` クラウドプロジェクトに対してのみ収集され、リアルタイムのプロセスではありません。

統計収集スクリプトは 1 日に 1 回実行されます。その後、セキュリティスキャンツールが新しいデータを取得する必要があります。

期待される同期アップサイクルの待ち時間は最大 1 週間で、少なくとも 24 時間かかります。

チェックから、次のステータスが表示される場合があります。

1. **合格**: セキュリティ スキャン ツールにより、更新されたデータがスキャンされ、変更が承認されました。
1. **不明**: セキュリティ スキャン ツールには、ドメインに関するデータがまだありません。次の同期サイクルを待ってください。
1. **失敗**：ステータスに「失敗」と表示される場合は、問題を修正する必要があります（2FA を有効にする、管理者 URL を変更など）。 そして、次の同期アップサイクルを待ちます。

インスタンスに対して変更が行われてから 24 時間が経過し、それらがセキュリティスキャンレポートに反映されていない場合は、[ サポートチケットを送信 ](/help/help-center-guide/help-center/magento-help-center-user-guide.md#submit-ticket) できます。 チケットの送信時にストア URL を指定します。

## BotNet の疑わしいエラー

「BotNet Suspect」エラーに関する通知が届きます。

### 原因：

1. ストアドメイン名は 2019 年に「潜在的な BotNet 参加者リスト」になり、管理パネル、ダウンローダー、または RSS 機能が公開され、その URL は CC スキミングフォーラムで言及されました。
1. このアラートは、ページに記載されているJavaScriptのように、店舗の侵害やマルウェアの兆候が原因である可能性があります。
1. それは必ずしも継続中の問題ではない。 以前にストアが侵害された場合でも、そのホスト名は「犠牲者」の名前としてダークウェブの周りに浮き上がることができます。
1. Adobe Commerceではなく、（OS レベルでの）システムの妥協が原因である可能性もあります。

### 解決策

1. 新しく作成した SSH アカウント、ファイルシステムの変更などを確認します。
1. セキュリティレビューを実行します。
1. 特に、まだMagento 1 が稼働している場合は、Adobe Commerceのバージョンとアップグレードを確認してください。このバージョンはサポートされなくなりました。
1. それでも問題が解決しない場合は、[ サポートチケットを送信 ](/help/help-center-guide/help-center/magento-help-center-user-guide.md#submit-ticket) し、ストア URL を指定します。

## 問題：挿入時に妥協のエラーが発生する

「妥協注入」エラーに関するエラーが表示されます。

### 解決策

1. セキュリティスキャンツールレポートに示されているスクリプトを確認します。
1. インラインスクリプト挿入のホームページソース本文を確認します。
1. システム設定の変更を実行し、特にカスタム `HTML head` と `Miscellaneous HTML` をセクション値 `footer` 確認します。
1. コードとデータベースのレビューを実行して、挿入されたマルウェアの未知の変化と兆候を確認します。

上記のいずれも役に立たない場合は、[ サポートチケットを送信 ](/help/help-center-guide/help-center/magento-help-center-user-guide.md#submit-ticket) し、ストア URL とレポートのエラーメッセージを指定します。

## よくある質問

### セキュリティスキャンは web サイトのパフォーマンスに影響を与えますか？

いいえ。 セキュリティスキャンでは、すべてのリクエストが 1 人のユーザーのように 1 つずつ行われます。 このため、セキュリティスキャンによって Web サイトのパフォーマンスに影響が出ることはありません。

### Adobe Commerceは、セキュリティスキャンレポートをどのくらいの期間保持しますか？

以前の 10 件のレポートを最後から生成できます。 古いレポートが必要な場合は、Adobe Commerce サポートにお問い合わせください。 最大 1 年前のセキュリティスキャンレポートを取得できます。

### サポートチケットを送信する際には、どのような情報が必要ですか？

ドメイン名を必ず指定してください。
