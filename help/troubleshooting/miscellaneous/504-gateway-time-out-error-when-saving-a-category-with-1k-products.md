---
title: 1k 以上の製品でカテゴリを保存する際に 504 ゲートウェイタイムアウトエラーが発生する
description: この記事では、大きなカテゴリ（1k 以上の製品）で操作を実行する場合に発生する可能性のあるタイムアウトの問題に対する解決策を提案します。
exl-id: 1f4b0385-215d-4d3d-8704-986c090824aa
feature: Cache, Categories, Marketing Tools, Products
role: Developer
source-git-commit: 2aeb2355b74d1cdfc62b5e7c5aa04fcd0a654733
workflow-type: tm+mt
source-wordcount: '324'
ht-degree: 0%

---

# 1k 以上の製品でカテゴリを保存する際に 504 ゲートウェイタイムアウトエラーが発生する

この記事では、大きなカテゴリ（1k 以上の製品）で操作を実行する場合に発生する可能性のあるタイムアウトの問題に対する解決策を提案します。

## 影響を受ける製品とバージョン：

* クラウドインフラストラクチャー上のAdobe Commerce 2.3.3
* Adobe Commerce オンプレミス 2.3.3
* Magento Open Source 2.3.3

## 問題

前提条件：ストア表示で、「**ストア**/**設定**/**カタログ**/**カタログ**/**製品 URL にカテゴリパスを使用**」オプションが「*はい* に設定されていること。

<u> 再現手順 </u>

1. Commerce管理者で、**カタログ**/**カテゴリ** に移動します。
1. 1000 を超える割り当てられた製品など、大きなカテゴリを開きます。
1. カテゴリに製品を追加します。
1. **カテゴリを保存** をクリックします。

<u> 期待される結果：</u>

カテゴリが正常に保存されました。

<u> 実際の結果：</u>

保存プロセスを 5 分間実行すると、504 ゲートウェイタイムアウトエラーページが表示されます。

## 原因：

このプロセスは、サーバーで設定されているタイムアウトよりも長い時間がかかります。

## 解決策

「**カテゴリ/製品」 URL 書き換えを生成**」オプションを無効にすると、すべてのカテゴリ/製品 URL 書き換えがデータベースから削除され、大きなカテゴリでの操作に必要な時間が大幅に短縮されます。

>[!WARNING]
>
>このオプションをオフにすると、カテゴリや製品の URL の書き換えが完全に削除され、復元できなくなります。

**「カテゴリ/製品」 URL 書き換えの生成** オプションを無効にするには：

1. Commerce管理者で、**Stores**/**Configuration**/**CATALOG**/**Catalog** に移動します。
1. 設定ページの左上隅にある「**範囲**」フィールドで、設定範囲を *デフォルト設定* に設定します。
1. **「カテゴリ/製品」 URL 書き換えの生成** を *いいえ* に設定します。
1. 「**設定を保存**」をクリックします。
1. 次を実行してキャッシュをクリーンアップ    ```bash    bin/magento cache:clean    ```    または、Commerce管理の **システム**/**ツール**/**キャッシュ管理** で設定します。

これで、製品をカテゴリに追加したり、多数の製品を含むカテゴリを移動したりできるようになりました。これらの操作は時間がはるかに短く、タイムアウトを引き起こすべきではありません。

## 関連資料

ユーザーガイドの [&#x200B; 製品の自動リダイレクト &#x200B;](https://experienceleague.adobe.com/ja/docs/commerce-admin/marketing/seo/url-rewrites/url-redirect-product-automatic)。
