---
title: 1k 以上の製品でカテゴリを保存する際に 504 ゲートウェイタイムアウトエラーが発生する
description: この記事では、大きなカテゴリ（1k 以上の製品）で操作を実行する場合に発生する可能性のあるタイムアウトの問題に対する解決策を提案します。
exl-id: 1f4b0385-215d-4d3d-8704-986c090824aa
feature: Cache, Categories, Marketing Tools, Products
role: Developer
source-git-commit: 958179e0f3efe08e65ea8b0c4c4e1015e3c5bb76
workflow-type: tm+mt
source-wordcount: '324'
ht-degree: 0%

---

# 1k 以上の製品でカテゴリを保存する際に 504 ゲートウェイタイムアウトエラーが発生する

この記事では、大きなカテゴリ（1k 以上の製品）で操作を実行する場合に発生する可能性のあるタイムアウトの問題に対する解決策を提案します。

## 影響を受ける製品とバージョン：

* クラウドインフラストラクチャー上のAdobe Commerce 2.3.3
* Adobe Commerce オンプレミス 2.3.3
* Magento Open Source 2.3.3

## 問題

前提条件：次の **ストア** > **設定** > **カタログ** > **カタログ** > **製品 URL にカテゴリパスを使用** オプションの設定 *はい* ストア表示にする。

<u>再現手順</u>

1. Commerce Admin で、に移動します。 **カタログ** > **カテゴリ**.
1. 1000 を超える割り当てられた製品など、大きなカテゴリを開きます。
1. カテゴリに製品を追加します。
1. クリック **カテゴリを保存**.

<u>期待される結果：</u>

カテゴリが正常に保存されました。

<u>実際の結果：</u>

保存プロセスを 5 分間実行すると、504 ゲートウェイタイムアウトエラーページが表示されます。

## 原因：

このプロセスは、サーバーで設定されているタイムアウトよりも長い時間がかかります。

## 解決策

の無効化 **「カテゴリ/製品」 URL の書き換えを生成** このオプションを選択すると、すべてのカテゴリ/製品 URL の書き換えがデータベースから削除され、大きなカテゴリを持つ操作に必要な時間が大幅に短縮されます。

>[!WARNING]
>
>このオプションをオフにすると、カテゴリや製品の URL の書き換えが完全に削除され、復元できなくなります。

を無効にするには **「カテゴリ/製品」 URL の書き換えを生成** オプション：

1. Commerce Admin で、に移動します。 **ストア** > **設定** > **カタログ** > **カタログ**.
1. 設定ページの左上隅にあるを **範囲** フィールドで、設定スコープをに設定します *デフォルトの設定*.
1. を設定 **「カテゴリ/製品」 URL の書き換えを生成** 対象： *不可*.
1. クリック **設定を保存**.
1. 次を実行してキャッシュをクリーンアップ    ```bash    bin/magento cache:clean    ```    または、の下のCommerce管理で確認できます。 **システム** > **ツール** > **キャッシュ管理**.

これで、製品をカテゴリに追加したり、多数の製品を含むカテゴリを移動したりできるようになりました。これらの操作は時間がはるかに短く、タイムアウトを引き起こすべきではありません。

## 関連資料

[製品の自動リダイレクト](https://docs.magento.com/user-guide/v2.3/marketing/url-redirect-product-automatic.html) を参照してください。
