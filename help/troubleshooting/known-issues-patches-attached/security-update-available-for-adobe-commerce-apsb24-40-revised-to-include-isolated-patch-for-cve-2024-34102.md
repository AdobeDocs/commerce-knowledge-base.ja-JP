---
title: Adobe Commerceでセキュリティ更新プログラムを利用できます – [!DNL APSB24-40]
promoted: true
description: Adobe Commerce 2.4.4 [!DNL CVE-2024-34102] p8、2.4.5-p7、2.4.6-p5、2.4.7 以前のバージョンに修正するためのホットフィックスとパッチを適用します。
feature: Compliance, Security
role: Developer
exl-id: b6f4a26f-a6cf-4ced-841e-a579c8e0f8f4
source-git-commit: 0f8744ceec118aa14632a3678d0262b3e730883d
workflow-type: tm+mt
source-wordcount: '803'
ht-degree: 0%

---

# Adobe Commerceでセキュリティ更新プログラムを利用できます – [!DNL APSB24-40]

>[!NOTE]
>
>**[!DNL CVE-2024-34102] に関する緊急の更新です。 Adobeは、Adobe Commerceの商人を標的にした非常に限られた攻撃で、[!DNL CVE-2024-34102] が野生で悪用されたことを認識しています。

2024 年 7 月 17 日（PT）に、2024 年 6 月 11 日（PT）のセキュリティ更新リリース、および 2024 年 6 月 28 日（PT）にリリースされた個別パッチに加えて、[!DNL hotfix] をリリースしました。

**すべての実稼動環境および非実稼動環境を確認すると、すべてのインスタンスにストアへのパッチが完全に適用されていることを確認できます。  <u> 早急な対応 </u> を行い、脆弱性を解決してください。**

>[!NOTE]
>
>**Adobe Commerce on Cloud マーチャントのみ**:<br><br>1. 最新バージョンの [!DNL ECE Tools] を使用していることを確認してください。 そうでない場合は、をアップグレード（または項目 2 にスキップ）します。 既存のバージョンを確認するには、次のコマンドを実行します：`composer show magento/ece-tools`<br>2。 既に最新バージョンの [!DNL ECE Tools] を使用している場合は、`op-exclude.txt` ファイルが存在するかどうかを確認します。 それには、次のコマンドを実行します。`ls op-exclude.txt`。このファイルが存在しない場合は、https://github.com/magento/magento-cloud/blob/master/op-exclude.txtをリポジトリに追加し、変更をコミットして再デプロイします。<br>3。 [!DNL ECE Tools] をアップグレードしなくても、リポジトリでhttps://github.com/magento/magento-cloud/blob/master/op-exclude.txtを追加または変更し、その変更をコミットして再デプロイすることもできます。

## オプション 1 - 2024 年 6 月 11 日からセキュリティの更新を適用 <u> ていない </u> マーチャントの場合、または 2024 年 6 月 28 日（PT）にリリースされた分離パッチの適用

1. 適用 [!DNL hotfix] は 2024 年 7 月 17 日にリリースされました。
1. セキュリティパッチを適用します。
1. [!UICONTROL maintenance mode] を有効にします。
1. [!DNL cron] の実行を無効にします（Cloud コマンド上のCommerce:`vendor/bin/ece-tools cron:disable`）。
1. [[!UICONTROL encryption keys]](https://experienceleague.adobe.com/ja/docs/commerce-admin/systems/security/encryption-key) を回転させます。
1. キャッシュをフラッシュします。
1. [!DNL cron] 実行を有効にします（Cloud コマンド上のCommerce:`vendor/bin/ece-tools cron:enable`）。
1. [!UICONTROL maintenance mode] を無効にします。

または

1. 分離パッチを適用します。 **<u>注意 </u>：このバージョンの分離パッチには、2024 年 7 月 17 日（PT）の [!DNL hotfix] が含まれています。**
1. [!UICONTROL maintenance mode] を有効にします。
1. [!DNL cron] の実行を無効にします（Cloud コマンド上のCommerce:`vendor/bin/ece-tools cron:disable`）。
1. [[!UICONTROL encryption keys]](https://experienceleague.adobe.com/ja/docs/commerce-admin/systems/security/encryption-key) を回転させます。
1. キャッシュをフラッシュします。
1. [!DNL cron] 実行を有効にします（Cloud コマンド上のCommerce:`vendor/bin/ece-tools cron:enable`）。
1. [!UICONTROL maintenance mode] を無効にします。

## オプション 2 - 2024 年 6 月 11 日からセキュリティ更新プログラムを <u> 既に </u> 適用しているマーチャントの場合、および/または 2024 年 6 月 28 日（PT）にリリースされた分離パッチ

1. 適用 [!DNL hotfix] は 2024 年 7 月 17 日にリリースされました。
1. [!UICONTROL maintenance mode] を有効にします。
1. [!DNL cron] の実行を無効にします（Cloud コマンド上のCommerce:`vendor/bin/ece-tools cron:disable`）。
1. [[!UICONTROL encryption keys]](https://experienceleague.adobe.com/ja/docs/commerce-admin/systems/security/encryption-key) を回転させます。
1. キャッシュをフラッシュします。
1. [!DNL cron] 実行を有効にします（Cloud コマンド上のCommerce:`vendor/bin/ece-tools cron:enable`）。
1. [!UICONTROL maintenance mode] を無効にします。

## オプション 3 - <u> 既に </u> （1） 2024 年 6 月 11 日からセキュリティ更新を適用しているマーチャント、（2） 2024 年 6 月 28 日にリリースされた分離パッチ、（3）暗号化キーをローテーションしたマーチャント

* 2024 年 7 月 17 日にリリースされた [ ホットフィックス ](#hotfix) を適用してください。


>[!NOTE]
>
>アップグレード後も安全を確保するには、**[[!UICONTROL encryption keys]](https://experienceleague.adobe.com/ja/docs/commerce-admin/systems/security/encryption-key)**:<br><br>1 を回転させる必要があります。 [!UICONTROL maintenance mode] を有効にします。<br>2。 [!DNL cron] の実行を無効にします（Cloud コマンド上のCommerce:`vendor/bin/ece-tools cron:disable`）。<br>3。 [!DNL encryption keys] を回転します。<br>4。 [!DNL cron] 実行を有効にします（Cloud コマンド上のCommerce:`vendor/bin/ece-tools cron:enable`）。<br>5。 [!UICONTROL maintenance mode] を無効にします。

この記事では、現在および以前のバージョンのAdobe CommerceとMagento Open Sourceに対して、この問題の個別パッチを実装する方法を説明します。
**<u>注意 </u>：このバージョンの分離パッチには、2024 年 7 月 17 日（PT）の [!DNL hotfix] が含まれています。**

## 影響を受ける製品とバージョン

Adobe Commerce on Cloud、Adobe Commerce オンプレミスおよびMagento Open Source:

* 2.4.7-p1 以前
* 2.4.6-p6 以前
* 2.4.5-p8 以前
* 2.4.4-p9 以前

## Adobe Commerce on Cloud、Adobe Commerce オンプレミスソフトウェアおよびMagento Open Sourceのソリューション

影響を受ける製品およびバージョンの脆弱性を解決するには、（バージョンに応じて） [!DNL VULN-27015] パッチを適用し、[!UICONTROL encryption keys] をローテーションする必要があります。

## ホットフィックスの詳細 {#hotfix}

* [!DNL Hotfix] [AC-12485_Hotfix_COMPOSER_patch.zip](assets/AC-12485_Hotfix_COMPOSER_patch.zip) をダウンロードします。

## 個別パッチの詳細

**<u>注意 </u>：このバージョンの分離パッチには、2024 年 7 月 17 日（PT）の [!DNL hotfix] が含まれています。**

Adobe CommerceまたはMagento Open Sourceのバージョンに応じて、次のパッチを添付して使用します。

### バージョン 2.4.7 の場合：

* [VULN-27015-2.4.7x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.7x_v2_COMPOSER_patch.zip)

### バージョン 2.4.6、2.4.6-p1、2.4.6-p2、2.4.6-p3、2.4.6-p4、2.4.6-p5:

* [VULN-27015-2.4.6x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.6x_v2_COMPOSER_patch.zip)

### バージョン 2.4.5、2.4.5-p1、2.4.5-p2、2.4.5-p3、2.4.5-p4、2.4.5-p5、2.4.5-p6、2.4.5-p7 の場合：

* [VULN-27015-2.4.5x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.5x_v2_COMPOSER_patch.zip)

### バージョン 2.4.4、2.4.4-p1、2.4.4-p2、2.4.4-p3、2.4.4-p4、2.4.4-p5、2.4.4-p6、2.4.4-p7、2.4.4-p8:

* [VULN-27015-2.4.4x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.4x_v2_COMPOSER_patch.zip)


## 分離パッチと [!DNL hotfix] の適用方法

ファイルを解凍し、サポートナレッジベースで [Adobe提供の Composer パッチの適用方法 ](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/how-to/how-to-apply-a-composer-patch-provided-by-magento.html?lang=ja) を参照して手順を確認します。

## Adobe Commerce on Cloud マーチャントの場合のみ – 分離されたパッチが適用されているかどうかを確認する方法

問題にパッチが適用されたかどうかを簡単に確認することはできないので、[!DNL VULN-27015] の分離されたパッチが正常に適用されたかどうかを確認することをお勧めします。

<u> これは、ファイル `VULN-27015-2.4.7_COMPOSER.patch` を例として使用し、次の手順を実行することで実行できます </u>。

1. [ 品質向上パッチツールのインストール ](https://experienceleague.adobe.com/docs/commerce-operations/tools/quality-patches-tool/usage.html?lang=ja)。
1. 次のコマンドを実行します。<br>
   ![cve-2024-34102-tell-if-patch-applied-code](assets/cve-2024-34102-tell-if-patch-applied-code.png)

<!--
    ```bash
    vendor/bin/magento-patches -n status |grep "27015\|Status"
    ```
-->

1. VULN-27015 が *Applied* ステータスを返す、次のような出力が表示されます。

   ```bash
   ║ Id            │ Title                                                        │ Category        │ Origin                 │ Status      │ Details                                          ║ ║ N/A           │ ../m2-hotfixes/VULN-27015-2.4.7_COMPOSER_patch.patch      │ Other           │ Local                  │ Applied     │ Patch type: Custom                                
   ```

## パッチ適用後に [!UICONTROL encryption key] を回転/変更する

パッチ適用後の [!UICONTROL encryption key] のローテーション/変更方法に関するガイダンス **については、Commerce Admin Systems Guide ドキュメントの [Admin Systems guide: [!UICONTROL Encryption key]](https://experienceleague.adobe.com/ja/docs/commerce-admin/systems/security/encryption-key)** を参照してください。

## ストアの保護と暗号化キーの回転に関するその他のガイダンス

ストアの保護と暗号化キーのローテーションに関するその他のガイダンスについては、Adobe Commerce ナレッジベースの [ ストアの保護と暗号化キーのローテーションに関するガイダンス： [!DNL CVE-2024-34102]](https://experienceleague.adobe.com/ja/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/guidance-on-securing-your-store-and-rotating-encryptionkeys-cve-2024-34102) も参照して [!DNL CVE-2024-34102] ださい。

## セキュリティの更新

Adobe Commerceで利用できるセキュリティ更新プログラム：

* [ 暗号化キーのローテーションのトラブルシューティング： [!DNL CVE-2024-34102]](https://experienceleague.adobe.com/ja/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/troubleshooting-encryption-key-rotation-cve-2024-34102)
* [Adobeセキュリティ速報（[!DNL APSB24-40]） ](https://helpx.adobe.com/jp/security/products/magento/apsb24-40.html)

## 関連資料

[Adobe Commerce インストールガイドの [!UICONTROL maintenance mode]](https://experienceleague.adobe.com/ja/docs/commerce-operations/installation-guide/tutorials/maintenance-mode) の有効化または無効化